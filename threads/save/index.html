<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-10-22 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20151022" />
    <meta http-equiv="Content-Language" content="en" />
    <title>java-sandbox &#x2013; <a name="top"></a> Saving SED Data in Iris</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
        
    
        
    <a href="https://github.com/olaurino/sandbox">
      <img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../" id="bannerLeft">
                                                                                                <img src="../../imgs/Iris_logo_padding.png"  alt="Chandra CXC"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-10-22
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0-SNAPSHOT
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
                      <a href="http://cxc.cfa.harvard.edu" class="externalLink" title="Chandra CXC">
        Chandra CXC</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Iris</li>
                              
      <li>
  
                          <a href="../../index.html" title="Homepage">
          <span class="none"></span>
        Homepage</a>
            </li>
                              <li class="nav-header">Introduction</li>
                              
      <li>
  
                          <a href="../../intro/index.html" title="About">
          <span class="none"></span>
        About</a>
            </li>
                
      <li>
  
                          <a href="../../intro/features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../../intro/future.html" title="Future">
          <span class="none"></span>
        Future</a>
            </li>
                              <li class="nav-header">Download Iris</li>
                              
      <li>
  
                          <a href="../../download/index.html" title="Download & Installation">
          <span class="none"></span>
        Download & Installation</a>
            </li>
                
      <li>
  
                          <a href="../../download/smoke_tests.html" title="Smoke Test">
          <span class="none"></span>
        Smoke Test</a>
            </li>
                
      <li>
  
                          <a href="../../bugs/smoke.html" title="Troubleshooting">
          <span class="none"></span>
        Troubleshooting</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../guide.html" title="How-To Guide">
          <span class="icon-chevron-down"></span>
        How-To Guide</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../threads/entry/index.html" title="Loading SED Data into Iris">
          <span class="none"></span>
        Loading SED Data into Iris</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/importer/index.html" title="Building and Managing SEDs">
          <span class="none"></span>
        Building and Managing SEDs</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/plot/index.html" title="Visualizing SED Data">
          <span class="none"></span>
        Visualizing SED Data</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/fit/index.html" title="Modeling and Fiting SED Data">
          <span class="none"></span>
        Modeling and Fiting SED Data</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Saving SED Data</a>
          </li>
                    
      <li>
  
                          <a href="../../threads/science/index.html" title="Shifting, Interpolating, and Integrating SED Data">
          <span class="none"></span>
        Shifting, Interpolating, and Integrating SED Data</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/science/sedstacker/index.html" title="Statistically Combining SEDs">
          <span class="none"></span>
        Statistically Combining SEDs</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/sdk/index.html" title="Creating Iris Plugins: The Iris Software Development Kit">
          <span class="none"></span>
        Creating Iris Plugins: The Iris Software Development Kit</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/plugin_manager/index.html" title="Installing Iris Plugins">
          <span class="none"></span>
        Installing Iris Plugins</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="../../bugs/index.html" title="Bugs & Caveats">
          <span class="none"></span>
        Bugs & Caveats</a>
            </li>
                
      <li>
  
                          <a href="../../faq/index.html" title="FAQs">
          <span class="none"></span>
        FAQs</a>
            </li>
                
      <li>
  
                          <a href="../../releasenotes/index.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
                              <li class="nav-header">References</li>
                              
      <li>
  
                          <a href="../../references/models.html" title="Iris Models">
          <span class="none"></span>
        Iris Models</a>
            </li>
                
      <li>
  
                          <a href="../../references/importer_files.html" title="Supported File Formats">
          <span class="none"></span>
        Supported File Formats</a>
            </li>
                
      <li>
  
                          <a href="../../publications/index.html" title="Publications">
          <span class="none"></span>
        Publications</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                            
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="../../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="http://olaurino.github.io/java-sandbox/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1><a name="top"></a> Saving SED Data in Iris</h1>
<hr />
<div class="section">
<h2><a name="Overview"></a><a name="overview"></a> Overview</h2>
<div class="section">
<div class="section">
<h4><a name="Synopsis:"></a>Synopsis:</h4>
<p>This thread describes how to save the SED data currently displayed in the Iris Visualizer to file, as well as record fitting sessions and fitted model parameters, images, and integrated flux calculations to file. This also explains how data can be exported to other programs. Saved SED data and fitting session files may be read back into the application at a later time to restore the analysis session.</p>
<p><b>Last Update:</b> 07 May 2015 - updated for Iris 2.1 beta. SEDs can now be saved in ASCII format.</p>
<hr /></div></div>
<div class="section">
<h3><a name="Contents"></a><a name="toc"></a> Contents</h3>

<ul>
  
<li><b><a href="index.html#save_data">Saving SED Data to File</a></b></li>
  
<li><b><a href="index.html#savefit">Saving Fitted Model Data</a></b></li>
  
<li><b><a href="index.html#saveplot">Saving Plot Image to File</a></b></li>
  
<li><b><a href="index.html#saveflux">Saving Flux Calculations from SED Integration</a></b></li>
  
<li><b><a href="index.html#samp">Exporting SED Data to External Applications</a></b></li>
  
<li><b><a href="index.html#history">History</a></b></li>
</ul>
<hr /></div></div>
<div class="section">
<h2><a name="Saving_SED_Data_to_File"></a><a name="save_data"></a> Saving SED Data to File</h2>
<p>The SED Builder has the capability to save separate SED segments from various locations as one aggregate SED. The X and Y (spectral coordinate and flux) data values comprising the currently displayed SED data segment(s) in the Iris Visualizer may be saved to a file in one of the following formats:</p>

<ul>
  
<li><b>VOTable (.vot)</b> - XML standard for the interchange of data represented as a set of tables. Consists of an unordered set of rows, each of a uniform structure, as specified in the table metadata. Each row in a table is a sequence of table cells, and each of these contains either a primitive data type, or an array of such primitives.</li>
  
<li><b>FITS (.fits)</b> - consists of a series of Header Data Units (HDUs), each containing two components: an ASCII text header and the binary data. The header contains a series of header keywords that describe the data in a particular HDU and the data component immediately follows the header.</li>
  
<li><b>ASCII Table (.dat)</b> - A 3-column text file where the SED segments are flattened to a single SED segment, and the spectral, flux, and flux error are written in columns 1, 2, and 3, respectively. A simple header contains the date the file was created, the target name, the RA and Dec, and the X and Y units.</li>
</ul>
<p>In order to write your SED data to file, simply select one of the two &#x201c;Save&#x201d; menu options in the SED Builder window: use the one at the top to save all open SED segments together, or the &#x201c;Save&#x201d; option in the &#x201c;Segments&#x201d; section to save a single segment to file. Doing so will open a small window where you can enter a filename and file format, VOT, FITS, or ASCII.</p>
<p><a href="./imgs/save_sed_new.png"><img src="./imgs/save_sed_new_small.jpg" alt="Save SED frame" /></a></p>
<p>By default, saving SEDs in VOT or FITS format will store all associated metadata along with the data values of the selected SED or segments. This means that SED segments will remain as individual spectro-photometric segments with their original units and metadata.</p>
<p>You have the option to save the data as a &#x201c;Single Table.&#x201d; Checking this box will save all the SED segments in that aggregate SED as one, full SED, without any distinction between segments. Tables are saved with the spectral, flux, error; the metadata is not saved. This makes the data more compliable for use in external applications. The user supplies the desired X and Y units for the new SED from the drop-down menus; this converts all SED segments to the same units.</p>
<p><img src="./imgs/save_sed_file.png" alt="Save a SED as a single table" /></p>
<p>SEDs saved in ASCII format can only be saved as a Single Table. Below is an example of a NED SED of NGC 7714 saved in ASCII format (in mJy vs microns):</p>

<div class="source">
<div class="source"><pre class="prettyprint"># This file was generated by Iris, the VAO SED building and analysis tool
#
# File created on Mon Mar 02 11:23:07 EST 2015
#
#
# TARGET = NGC 7714
# RA = 354.058744
# DEC = 2.155161
# XUNIT = um
# YUNIT = Jy
#
# x y y_err

2.0120302013422817E-4 1.8799999999999996E-8 5.37E-9
2.0120302013422817E-4 2.6800000000000002E-8 5.37E-9
2.0675344827586207E-4 1.79E-8 NaN
2.0675344827586207E-4 1.17E-8 NaN
2.997925E-4 5.77E-8 NaN
3.2201127819548876E-4 4.0799999999999995E-8 NaN
...
125963.23529411764 0.043000000000000003 0.003
209645.1048951049 0.0153 0.006000000000000001
214137.5 0.0658 NaN
214137.5 0.0669 0.0028000000000000004
        
</pre></div></div>
<p>Please note that the saving a SED as a Single Table (ASCII format included) does not sort the rows by spectral values. If you load the file to an external application, you may need to sort the data yourself. This shouldn&#x2019;t be a problem for single-segment SEDs, but care must be taken for multi-segment SEDs.</p>
<p>Saved SED data may be opened in a future session of Iris simply by selecting the <i>Load File</i> icon on the Iris desktop, and then using the <i>Location on Disk</i> option in the data-loading window which opens.</p>
<p><b>Note:</b> You do not need to write the extension (.vot, .fits, .dat) to load the file back into Iris, but Iris will not add the extension after the filename for you.</p>
<p><b>Note:</b> If you accidentally exit the <i>SED Builder</i> window or <i>Iris Visualizer</i>, your data will still be there; just click on the SED Builder/SED Viewer icon to restore the SEDs. However, if you wish to revisit the SED data in a later Iris session, you <i>must</i> save the data before exiting Iris.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Saving_Fitted_Model_Data"></a><a name="savefit"></a> Saving Fitted Model Data</h2>
<p>After fitting a model to SED data in Iris, the model X and Y data arrays may be saved separately from the source data by selecting the &#x201c;Save&#x201d; option in the Iris Fit window after finalizing a fit, and prior to exiting the fitting session with the &#x201c;Dismiss&#x201d; button (see the <a href="../../threads/fit/index.html" title="Modeling and Fiting SED Data">&#x201c;Modeling and Fitting SED Data&#x201d;</a> section of the <a href="../../guide.html">Iris How-to Guide</a> for details). Saved custom fit parameters may be restored in a future Iris session by opening the saved CDB-format file from within the Iris Fit window, using the <i>File-&gt;Read from File</i> menu option.</p>
<p>Selecting <i>File -&gt; Write to text file</i>, instead, saves the model data to a human-readable text file. The saved model values contained in such a text file would appear in the format shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">% more bpl_active_comps.txt

File: Sed0

Fri Feb 15 16:35:05 EDT 2015  Iris 2.1 

TARGNAME: 3C 273

Model Expression:
        c1

Fit parameters:
        Final fit statistic:      0.01153118077229248
        Reduced statistic:        nan
        Probability [Q-value]:    nan
        Degrees of freedom:       447.0
        Data points:              450
        Last function evaluation: 342

Component 1: brokenpowerlaw
   F   refer  = 5000.0        angstroms                                   
       ampl   = 0.008196716                                               
       index1 = 0.040695254                                               
       index2 = -0.18412833                   
</pre></div></div>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Saving_Plot_Image_to_File"></a><a name="saveplot"></a> Saving Plot Image to File</h2>
<p>The SED data currently displayed in Iris may be printed to a hardcopy image in either JPG (.jpg), PNG (.png), GIF (.gif) or BITMAP (.bmp) format, by selecting <i>File-&gt;Save plot to image file</i>, and making the desired image format selection. The image will scale to the size and shape of the plot in the Iris Visualizer. Below is an example image saved in JPG format.</p>
<p><img src="./imgs/NGC7714.jpg" alt="Iris screenshot" /></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Saving_Flux_Calculations_from_SED_Integration"></a><a name="saveflux"></a> Saving Flux Calculations from SED Integration</h2>
<p>Under the &#x201c;Shift, Interpolate, Integrate&#x201d; icon, you can calculate the flux through a user-inputted passband or through one of the pre-loaded photometry filters (see <a href="../science/index.html#integrated">Integration of SEDs in Iris</a> in the &#x201c;Shifting, Interpolating and Integrating SED Data in Iris&#x201d; thread for more information). You have the option to save any or all of the calculated fluxes in ASCII format by highlighting the ones you wish to save; clicking &#x201c;Save&#x201d; without highlighting any of the Results will save all fluxes. You can convert the calculated fluxes and effective wavelengths/passbands into whichever units you want by using the X and Y drop-menus. Below is an example of the ASCII file displaying the output file:</p>

<div class="source">
<div class="source"><pre class="prettyprint">% more arp220_fluxes.txt

# This file was generated by Iris, the VAO SED building and analysis tool
#
# Iris Flux Integration output
# Spectral values are the effective wavelengths of the passbands
#
# File created on Wed Feb 25 16:05:58 EST 2015
#
#
# TARGET = ARP 220
# RA = 233.737985
# DEC = 23.503187
# XUNIT = um
# YUNIT = erg/s/cm2
#
# x y

3.315655859375 1.15034615781E-15
4.56449921875 6.69067475881E-16
10.78684453125 1.22262438471E-15
21.9149640625 2.88628452028E-15
4000.5 8.44103142055E-9
164885.875 2.02285348225E-14
</pre></div></div>
<p>These files can be reloaded into Iris as an ASCII Table.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Exporting_SED_Data_to_External_Applications"></a><a name="samp"></a> Exporting SED Data to External Applications</h2>
<p>Simple Application Messaging Protocol (SAMP) allows separate programs to communicate with each other. Iris uses SAMP to communicate with other SAMP-enabled applications, such as TOPCAT and Aladin. So long as the SAMP status in the lower left-hand corner of the Iris desktop says &#x201c;connected&#x201d;, we can transmit tabular data back-and-forth between Iris and other SAMP-enabled Virtual Observatory programs.</p>
<p><img src="../plot/imgs/SAMP.png" alt="Iris SAMP icon" /></p>
<p>Iris exports data to outside applications via the &#x201c;Broadcast&#x201d; button. Iris can broadcast data from the SED Builder, which allows us to send the metadata for SED segments and aggregate SEDs, and from the Metadata Browser, from which we can select specific data points to send. The SED Builder window has two &#x201c;Broadcast&#x201d; buttons: one at the very top of the window, which allows for the highlighted SED in the <i>Open SEDs</i> box to be exported, and one in the <i>Segments</i> section, which allows one or multiple SED segments to be broadcasted; its icon is a radio tower. The Metadata Browser &#x201c;Broadcast&#x201d; button is in the bottom right-hand corner of the window.</p>
<p>With the external application open and connected to the SAMP network, highlighted SED segments or data points may be broadcasted from Iris to the external application. In the example below, we have loaded an SED of M82 from NED in Iris, highlighted the SED segment in the <i>Segments</i> section, and exported the data to TOPCAT by clicking on the highlighted &#x201c;Broadcast&#x201d; button in the SED Builder window. We view the table in TOPCAT by clicking <i>Views -&gt; Table Data</i>.</p>
<p><a href="./imgs/samp_example.png"><img src="./imgs/samp_example_small.jpg" alt="Iris SAMP icon" /></a></p>
<p>See <a href="../../threads/plot/index.html#broadcast">&#x201c;Transmitting Data from a SAMP-enabled Application&#x201d;</a> for an example of exporting SED data from the Metadata Browser in Iris to TOPCAT.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="History"></a><a name="history"></a>History</h2>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Date </th>
      
<th>Change </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>08&#xa0;Aug&#xa0;2011 </td>
      
<td>updated for Iris Beta 2.5 </td>
    </tr>
    
<tr class="a">
      
<td>25&#xa0;Sep&#xa0;2011 </td>
      
<td>updated for Iris 1.0 </td>
    </tr>
    
<tr class="b">
      
<td>15&#xa0;Jun&#xa0;2012 </td>
      
<td>updated for Iris 1.1 </td>
    </tr>
    
<tr class="a">
      
<td>02&#xa0;Jan&#xa0;2013 </td>
      
<td>updated for Iris 1.2 </td>
    </tr>
    
<tr class="b">
      
<td>02&#xa0;Jul&#xa0;2013 </td>
      
<td>updated for Iris 2.0 </td>
    </tr>
    
<tr class="a">
      
<td>05&#xa0;Aug&#xa0;2013 </td>
      
<td>added &#x201c;Save Plot Image to File&#x201d;, &#x201c;Save Integrated Flux&#x201d; and &#x201c;Export SED Data to External Applications&#x201d; discussions </td>
    </tr>
    
<tr class="b">
      
<td>02&#xa0;Dec&#xa0;2013 </td>
      
<td>updated for Iris 2.0.1 </td>
    </tr>
    
<tr class="a">
      
<td>21&#xa0;Apr&#xa0;2014 </td>
      
<td>fixed typo. Single Tables store only 3 columns: the spectral, flux and flux error data. </td>
    </tr>
    
<tr class="b">
      
<td>07&#xa0;May&#xa0;2015 </td>
      
<td>updated for Iris 2.1 beta. SEDs can now be saved in ASCII format. </td>
    </tr>
  </tbody>
</table>
<hr />

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<!-- external links -->
<!-- threads -->
<!-- extras (Iris models) -->
<!-- reference files -->
<!-- CXC links -->
<!-- Navigation --></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2015.
          All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
