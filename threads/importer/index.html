<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-10-20 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20151020" />
    <meta http-equiv="Content-Language" content="en" />
    <title>java-sandbox &#x2013; <a name="top"></a> Building and Managing SEDs in Iris</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
        
    
        
    <a href="https://github.com/olaurino/sandbox">
      <img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../" id="bannerLeft">
                                                                                                <img src="../../imgs/Iris_logo_padding.png"  alt="Chandra CXC"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-10-20
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0-SNAPSHOT
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
                      <a href="http://cxc.cfa.harvard.edu" class="externalLink" title="Chandra CXC">
        Chandra CXC</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Iris</li>
                              
      <li>
  
                          <a href="../../index.html" title="Homepage">
          <span class="none"></span>
        Homepage</a>
            </li>
                              <li class="nav-header">Introduction</li>
                              
      <li>
  
                          <a href="../../intro/index.html" title="About">
          <span class="none"></span>
        About</a>
            </li>
                
      <li>
  
                          <a href="../../intro/features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../../intro/future.html" title="Future">
          <span class="none"></span>
        Future</a>
            </li>
                              <li class="nav-header">Download Iris</li>
                              
      <li>
  
                          <a href="../../download/index.html" title="Download & Installation">
          <span class="none"></span>
        Download & Installation</a>
            </li>
                
      <li>
  
                          <a href="../../download/smoke_tests.html" title="Smoke Test">
          <span class="none"></span>
        Smoke Test</a>
            </li>
                
      <li>
  
                          <a href="../../bugs/smoke.html" title="Troubleshooting">
          <span class="none"></span>
        Troubleshooting</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../guide.html" title="How-To Guide">
          <span class="icon-chevron-down"></span>
        How-To Guide</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../threads/entry/index.html" title="Loading SED Data into Iris">
          <span class="none"></span>
        Loading SED Data into Iris</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Building and Managing SEDs</a>
          </li>
                    
      <li>
  
                          <a href="../../threads/plot/index.html" title="Visualizing SED Data">
          <span class="none"></span>
        Visualizing SED Data</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/fit/index.html" title="Modeling and Fiting SED Data">
          <span class="none"></span>
        Modeling and Fiting SED Data</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/save/index.html" title="Saving SED Data">
          <span class="none"></span>
        Saving SED Data</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/science/index.html" title="Shifting, Interpolating, and Integrating SED Data">
          <span class="none"></span>
        Shifting, Interpolating, and Integrating SED Data</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/science/sedstacker/index.html" title="Statistically Combining SEDs">
          <span class="none"></span>
        Statistically Combining SEDs</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/sdk/index.html" title="Creating Iris Plugins: The Iris Software Development Kit">
          <span class="none"></span>
        Creating Iris Plugins: The Iris Software Development Kit</a>
            </li>
                    
      <li>
  
                          <a href="../../threads/plugin_manager/index.html" title="Installing Iris Plugins">
          <span class="none"></span>
        Installing Iris Plugins</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="../../bugs/index.html" title="Bugs & Caveats">
          <span class="none"></span>
        Bugs & Caveats</a>
            </li>
                
      <li>
  
                          <a href="../../faq/index.html" title="FAQs">
          <span class="none"></span>
        FAQs</a>
            </li>
                
      <li>
  
                          <a href="../../releasenotes/index.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
                              <li class="nav-header">References</li>
                              
      <li>
  
                          <a href="../../references/models.html" title="Iris Models">
          <span class="none"></span>
        Iris Models</a>
            </li>
                
      <li>
  
                          <a href="../../references/importer_files.html" title="Supported File Formats">
          <span class="none"></span>
        Supported File Formats</a>
            </li>
                
      <li>
  
                          <a href="../../publications/index.html" title="Publications">
          <span class="none"></span>
        Publications</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                            
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="../../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="http://olaurino.github.io/java-sandbox/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1><a name="top"></a> Building and Managing SEDs in Iris</h1>
<hr />
<div class="section">
<h2><a name="Overview"></a><a name="overview"></a> Overview</h2>
<div class="section">
<div class="section">
<h4><a name="Synopsis:"></a>Synopsis:</h4>
<p>As one of the primary functions of Iris is building multi-segment SEDs, it is expected that users will need to input SED data in various file formats, and have access to a robust interface for constructing and managing the various pieces of the aggregate SED. To this end, Iris is equipped with the SED Builder tool. This thread describes the various features of the SED Builder which allow the user to build aggregate SEDs, convert data from non-native formats, and generally manage all loaded SED data in the Iris session.</p>
<p><b>Last Update:</b> 07 May 2015 - updated for Iris 2.1 beta. Added ASCII Table as an output format for SEDs. Updated <a href="#example_setup">Setup File</a> example.</p>
<hr /></div></div>
<div class="section">
<h3><a name="Contents"></a><a name="toc"></a>Contents</h3>

<ul>
  
<li><b><a href="index.html#intro">Introduction</a></b>
  
<ul>
    
<li><a href="index.html#file_formats">Supported File Formats</a></li>
  </ul></li>
  
<li><b><a href="index.html#start">Getting Started</a></b></li>
  
<li><b><a href="index.html#configure">Configuring Input SED Data</a></b>
  
<ul>
    
<li><a href="index.html#import_sed">Converting the SED Data Segment Format</a></li>
    
<li><a href="index.html#import_phot_points">Importing Photometric Points</a></li>
    
<li><a href="index.html#import_phot_cats">Importing Photometric Catalogs</a></li>
  </ul></li>
  
<li><b><a href="index.html#multi">Building a Multi-segment SED</a></b></li>
  
<li><b><a href="index.html#separate">Managing Separate SEDs</a></b></li>
  
<li><b><a href="index.html#save">Saving SED Data to File</a></b></li>
  
<li><b><a href="index.html#help">Getting Help</a></b></li>
  
<li><b><a href="index.html#cli">Advanced: SED Builder Command-line Interface (CLI)</a></b>
  
<ul>
    
<li><a href="index.html#create_setup">Creating a Setup File for the CLI</a></li>
    
<li><a href="index.html#use_setup">Using a Setup File</a></li>
    
<li><a href="index.html#edit_setup">Editing a SED Builder Setup File</a></li>
    
<li><a href="index.html#example_setup">Example: Configuring and Using a Setup File</a></li>
  </ul></li>
  
<li><b><a href="index.html#plugins">Advanced: Creating Custom Input File Formats with Plugins</a></b></li>
  
<li><b><a href="index.html#history">History</a></b></li>
</ul>
<hr /></div></div>
<div class="section">
<h2><a name="Introduction"></a><a name="intro"></a> Introduction</h2>
<p>The SED Builder interface in Iris is the place where all loaded SED data is managed, where multi-segment SEDs are constructed, and where SED data input in a non-native format is converted for display in the <i>Iris Visualizer</i>. One or multiple loaded segments and/or photometric points may be displayed and analyzed simultaneously, or separately, allowing you to maintain completely independent data analysis sessions.</p>
<p><img src="./imgs/sedbuilder_m87_v2.png" alt="snapshot of SED Builder window" /></p>
<p>Whenever data is loaded or imported into Iris as demonstrated in the &#x201c;Loading SED Data into Iris&#x201d; section of the [Iris How-to Guide][guide], an entry for that SED is automatically added to the SED Builder window. At this point, you have the option to continue adding segments/points to this SED, or, you can create a new entry representing a separate SED. Whichever SED you select in the SED Builder window is the one that will display in the <i>Iris Visualizer</i>, giving you the flexibility to jump back-and-forth between separate analysis sessions.</p>
<p>When you load SED data into Iris in a format that is not natively supported by the application, the SED Builder will prompt you to enter a few key pieces of information about the data format so that it is able to convert it into a form which is recognized by VO tools. The resulting configuration information may be saved to file in order to be used later in the non-interactive command-line interface of the tool (e.g., to quickly convert a batch of files), for the advanced user. If you happen to load a file into Iris that is already in the supported IVOA-standard FITS or VOTable format, this extra step of entering configuration information is unnecessary.</p>
<div class="section">
<h3><a name="Supported_Input_File_Formats"></a><a name="file_formats"></a> Supported Input File Formats</h3>
<p>The file formats supported by Iris, listed below with brief descriptions, are those that are supported by common VO tools. For each, a simple, generic assumption is made: data is arranged in a tabular format, with all rows having the same number of columns, and possibly with a header where metadata is stored. The way in which both data and metadata are stored depends on the specific format.</p>
<p>For detailed information on these formats, refer to the [Supported File Formats][importer_files] page.</p>

<ul>
  
<li>
<p><b>ASCII</b> - text file with columns separated by spaces and/or tabs</p></li>
  
<li>
<p><b>CSV</b> - text file with columns separated by commas (the first row may contain the name of the columns)</p></li>
  
<li>
<p><b>FITS</b> - consists of a series of Header Data Units (HDUs), each containing two components: an ASCII text header and the binary data. The header contains a series of header keywords that describe the data in a particular HDU and the data component immediately follows the header.</p></li>
  
<li>
<p><b>VOTABLE</b> - (text or binary) XML standard for the interchange of data represented as a set of tables. Consists of an unordered set of rows, each of a uniform structure, as specified in the table metadata. Each row in a table is a sequence of table cells, and each of these contains either a primitive data type, or an array of such primitives.</p></li>
  
<li>
<p><b>IPAC</b> - a custom bar-separated text format by IPAC</p></li>
  
<li>
<p><b>TST</b> - Tab Separated Table (comments are ignored, metadata is in key, value pairs)</p></li>
</ul>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div></div>
<div class="section">
<h2><a name="Getting_Started"></a><a name="start"></a> Getting Started</h2>
<p>The main mode of interaction with the SED Builder is through the Iris Graphical User Interface (GUI), but a non-interactive, command-line interface (CLI) is also available for advanced users wishing to convert their unsupported data formats in this mode. (In order to use the SED Builder CLI, what is referred to in this document as a &#x2018;setup&#x2019; file is required input, along with the file to be converted. The setup file stores the configuration information needed to convert SED data written in an unsupported format into one of the supported FITS or VOTable formats; it may be created by using the SED Builder in interactive mode, first.)</p>
<p>To access the SED Builder in the mainstream way, simply start Iris from the Unix command line, as shown below, and then click the &#x201c;Load File&#x201d; option on the Iris desktop; this will open the SED Builder window and the window for loading data.</p>

<div class="source">
<div class="source"><pre class="prettyprint">% /bin/bash    # for C-shell users ONLY

$ source activate iris
$ iris &amp;
</pre></div></div>
<p><a href="./imgs/load_file_windows_v2.png"><img src="./imgs/load_file_windows_v2_small.jpg" alt="Iris desktop with SED Builder open" /></a></p>
<p>Then, according to the instructions in the &#x201c;Loading Data into Iris&#x201d; section of the [How-to Guide][guide.html], load your first (or only) spectrum or catalog of photometric points into Iris. Data may be loaded from a file on your local disk; an <tt>http</tt> or <tt>ftp</tt> URL address (internet connection required); from the NED SED service (internet connection required); or from a remote SAMP-connected application. The &#x201c;Spectrum/SED&#x201d; option should be used to load a file which contains at least one column for the spectral coordinate (energy, wavelength, frequency) and one column for the flux coordinate (flux, flux density, or magnitude), for a single astronomical source. A &#x201c;photometry catalog&#x201d; file refers to one in which each row contains an arbitrary number of photometric points for a single astronomical source (the file may contain multiple rows representing multiple astronomical sources). See the Iris FAQ entry <a href="../../../faq/sed.html" title="SED Data Type FAQs">&#x201c;Which SED data types are supported by Iris?&#x201d;</a> for more details, as well as the sub-sections of the &#x201c;Configuring Input SED Data&#x201d; section below.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Configuring_Input_SED_Data"></a><a name="configure"></a> Configuring Input SED Data</h2>
<p>If a SED data segment is loaded in IVOA-standard FITS or VOTable format, an entry for the SED will automatically display in the SED Builder window, and the data plot will appear in the Iris Visualizer.</p>
<p><a href="./imgs/loaded_ned_sed_v2.png"><img src="./imgs/loaded_ned_sed_v2_small.jpg" alt="snapshot of Iris desktop" /></a></p>
<p>In the SED Builder window, you have the option of entering a target name and coordinates to be associated with the new SED, and recorded in the metadata of the saved SED file. If this information is provided and an internet connection is available, the name is resolved and the associated coordinate fields are automatically populated.</p>
<p>If the file you are loading is compliant, the segments in the file will be automatically imported and no other input will be required. However, if a SED data segment is loaded in a non-native format, the Import Setup Frame will open, prompting you to enter the conversion configuration for the loaded data so that it can be displayed in the Iris Visualizer.</p>
<p><a href="./imgs/import_setup_frame_v2.png"><img src="./imgs/import_setup_frame_v2_small.jpg" alt="Import setup frame" /></a></p>
<p>An extra step of entering configuration information is also required of the user when the Load Photometry Catalog option is selected upon loading data; the Photometry Catalog Import window will open, where you specify how to display the loaded photometric points.</p>
<p><a href="./imgs/catalog_import_v2.png"><img src="./imgs/catalog_import_v2_small.jpg" alt="Iris photometry import frame" /></a></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<div class="section">
<h3><a name="Converting_the_SED_Data_Segment_Format"></a><a name="import_sed"></a> Converting the SED Data Segment Format</h3>
<p>In the &#x201c;Import Setup Frame&#x201d; window which opens upon selecting the &#x201c;Load Spectrum/SED&#x201d; option in the file loading window, for a non-compliant format file, you must enter various pieces of information which will be used to define the configuration for the format conversion for this particular data segment (i.e., so that the tool knows how to convert the data from the unsupported format to a supported one). The &#x201c;Save Setup&#x201d; button beneath the &#x201c;Setup Help&#x201d; window is available for those who wish to write this configuration to file for use with the SED Builder CLI, described in the &#x201c;Advanced Usage&#x201d; section below.</p>
<p><a href="./imgs/import_setup_complete.png"><img src="./imgs/import_setup_complete_small.png" alt="snapshot of SED Builder GUI" /></a></p>
<p><i>If the file imported has more than one table in it, more than one &#x201c;Import Setup Frames&#x201d; will be opened.</i></p>
<p>The fields in the Import Setup Frame window that require entries are the X Axis, Y Axis, and Y Error fields. Until these fields are populated, the Setup Help window will contain warning messages indicating that the form is incomplete, and you will not be able to save the current setup to a file or import new segments into the SED.</p>
<p>In the <b>X Axis</b> section, you must characterize the column in your file which corresponds to the spectral coordinate axis, e.g., wavelength in Angstrom units, frequency in Hz, or energy in eV.</p>
<p>In the Column drop-down menu, you will find the name of the columns as they are in your file. If no column names can be found, then &#x201c;colN&#x201d; will be used, where N is the number of the column as it appears in the file.</p>
<p>In the <b>Y Axis</b> section, you are to characterize the column in your file which corresponds to the flux density axis, e.g., energy flux density in ergs/s/cm2/Hz, photon flux density in photons/s/cm2/Hz, or the AB magnitude equivalent of the flux density.</p>
<p>In the <b>Y Error</b> section, you can characterize the error for the Y Axis using several different options:</p>

<ul>
  
<li><i>Unknown</i>: the error is unknown.</li>
  
<li><i>ConstantValue</i>: all the points in the segment have the same error, which is not actually included in the file, but is typed into the provided field (e.g, &#x201c;0.001&#x201d;).</li>
  
<li><i>SymmetricColumn</i>: the error is symmetric and its value is contained in a column.</li>
  
<li><i>SymmetricParameter</i>: the error is symmetric and its value is contained in a parameter in the file header. The Builder tries to read the parameters from the file header for the formats that allow such parameters. If the parameter cannot be read, you are required to include the error value manually as a ConstantValue.</li>
</ul>
<p>In the remaining fields of the Import Setup Frame window, you can view the name you assigned to the SED along with the name and path of the associated file; as well as view and edit the target information and data publisher (e.g., &#x201c;NED&#x201d;) which was optionally entered in the SED builder window, or add this information here if it was not done previously.</p>
<p>After entering the required configuration information into the setup window, the &#x201c;Add Segment to SED&#x201d; and &#x201c;Save Setup&#x201d; buttons become active.</p>
<p>At this point you can optionally save the configuration to a text file for later use of the tool in non-interactive mode, as well as add the configured segment to the new SED. Adding the segment closes the &#x201c;Import Setup Frame&#x201d; window and brings you back to the SED Builder window which is labeled with your SED ID and contains general information about all SED segments loaded in the session thus far.</p>
<p><a href="./imgs/sedbuilder_3c273_v2.png"><img src="./imgs/sedbuilder_3c273_v2_small.jpg" alt="snapshot of Iris GUI" /></a></p>
<p>Here, you may continue loading data segments from various locations, and repeat the process outlined above until you are finished building your SED. The list of loaded segments is shown with associated coordinates, publisher information, and the number of points in the segment, if this information is available. Whichever of the SEDs is selected in the &#x201c;Open SEDs&#x201d; section is the one that will display in the Iris Visualizer.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h3><a name="Importing_Photometric_Points"></a><a name="import_phot_points"></a> Importing Photometric Points</h3>
<p>A photometric point can be added to an SED via the &#x201c;New Point&#x201d; button in the &#x201c;Segments&#x201d; section in the SED Builder window. You must specify the X and Y axes units first, and then can choose your photometric input: Single Value, Passband, or Photometry Filter. Choosing the Photometry Filter brings up a browser (which can also be found in Tools -&gt; SED Builder -&gt; Photometry Filter Browser) from which you can select over 2100 filters from various telescopes. The orange dialog in the bottom right corner displays the necessary information needed to import the photometric point into Iris.</p>
<p><a href="./imgs/single_point_v2.png"><img src="./imgs/single_point_v2_small.jpg" alt="snapshot of Iris GUI" /></a> <a href="./imgs/phot_filter_box_v2.png"><img src="./imgs/phot_filter_box_v2.jpg" alt="snapshot of Iris GUI" /></a></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h3><a name="Importing_Photometric_Catalogs"></a><a name="import_phot_cats"></a> Importing Photometric Catalogs</h3>
<p>A &#x201c;photometry catalog&#x201d; in Iris refers to a file containing a set of basic photometric information for one or multiple astronomical sources; each row can contain information about an arbitrary number of photometry points for a given source. The methods for uploading a photometric catalog is similar to the method outlined for single photometric point. The contents of an example file are shown below, which contains one row of SDSS optical <i>ugriz</i> AB magnitudes for the quasar 3C273, downloaded from the <a class="externalLink" href="http://skyserver.sdss.org/dr3/en/tools/search/radial.asp">SkyServer</a> interface in CSV format.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ more sdss_photcat_results_3c273.csv
run,rerun,camcol,field,obj,type,ra,dec,u,g,r,i,z,Err_u,Err_g,Err_r,Err_i,Err_z
1458,40,2,417,75,6,187.277912,2.052386,13.868,12.994,12.883,12.637,13.241,5.051E-3,1.57E-3,2.331E-3,1.897E-3,5.689E-3
</pre></div></div>
<p>The spectral coordinate can be expressed by a column in the input file, by a photometry filter, or by a spectral range (the Energy Bin option).</p>
<p>You can begin adding photometric points by selecting the green plus sign icon in the Photometry Catalog Import window, and then filling in the various fields. The fields that require entries are the X Axis, Y Axis, Name, Ra, and Dec fields. Until these fields are populated, the Photometry Catalog Import window will contain warning messages indicating that the form is incomplete.</p>
<p><a href="./imgs/phot_cat_import_blank.png"><img src="./imgs/phot_cat_import_blank_small.png" alt="Photometry Catalog Importer" /></a></p>
<p>Each loaded point will be assigned the name &#x201c;Point0&#x201d;, &#x201c;Point1&#x201d;, &#x201c;Point2&#x201d;, and so on, but you can rename them using the &#x201c;Change Name&#x201d; option at the top of the window, such as &#x201c;u_mag&#x201d;, &#x201c;g_mag&#x201d;, etc.</p>
<p>In the <b>X Axis</b> section, you specify the spectral coordinate to use, either a &#x201c;single value&#x201d; selected from amongst the columns of your input file (in the drop-down menu, you will find the names of the columns as they are in your file); an entered energy range; or a photometry filter from a known facility such as the Sloan Digital Sky Survey. The full list of available filters may be accessed via the &#x201c;Photometry Bin -&gt; Choose&#x201d; option in the Photometry Catalog Import window, as well as from the &#x201c;Tools -&gt; SED Builder -&gt; Photometry Filters Browser&#x201d; menu option on the Iris desktop; some of the filter selections are shown in the image below.</p>
<p><img src="./imgs/phot_bin_choose2.png" alt="Photometry Catalog Importer" /></p>
<p>In the <b>Y Axis</b> section, you first specify the type of flux values included in the input file, either flux, flux density, photon flux, photon flux density, or magnitude, with various units options available for each selection.</p>
<p>Next, the &#x201c;Value&#x201d; and &#x201c;Error&#x201d; fields should be populated with the names of the columns in your input file that contain the flux values and the errors on those values.</p>
<p>The <b>Sources</b> section contains additional entries used to characterize the source(s) in the input list, where you select the column in your input file that contains the source name(s), Ra, and Dec coordinates.</p>
<p>In the remaining, optional fields of the Photometry Catalog Import window, you can view the name you assigned (or was auto-assigned) to the point or series of points in the SED Builder window, along with the name and path of the photometry catalog file. You can also enter a data publisher in the &#x201c;Catalog Metadata&#x201d; field (e.g., &#x201c;SDSS&#x201d;, or &#x201c;me&#x201d;).</p>
<p><img src="./imgs/phot_import_u_mag_small.png" alt="Photometry Catalog Importer" /></p>
<p>After repeating the procedure outlined above for each photometric point in the loaded file - e.g., five times total for the u, g, r, i, and z magnitudes in our example - you can import the data into Iris by clicking the &#x201c;Import Catalog to SED&#x201d; button, which will open the Iris Visualizer and display the imported points.</p>
<p><a href="./imgs/phot_import_ugriz.png"><img src="./imgs/phot_import_ugriz_small.png" alt="Photometry Catalog Importer" /></a> <a href="./imgs/sdss_phot_cat_v2.png"><img src="./imgs/sdss_phot_cat_v2_small.jpg" alt="Photometry Catalog Importer" /></a></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div></div>
<div class="section">
<h2><a name="Building_a_Multi-segment_SED"></a><a name="multi"></a> Building a Multi-segment SED</h2>
<p>As the SED Builder has the flexibility to read data files in a variety of formats and from different locations, you are able to use the tool to gather multiple SED data segments and points and save them together as an aggregate SED, and save to a single FITS or VOTable format file.</p>
<p>In order to build a multi-segment SED - where each segment may be configured differently - you can load the first segment or point(s) using the appropriate Iris &#x201c;Load File&#x201d; option, and then continue to add segments or points in this way to the same SED entry, using the &#x201c;Load File&#x201d; or &#x201c;New Point&#x201d; options in the &#x201c;Segments&#x201d; section of the SED Builder window. To maintain separate SED entries, please refer to the instructions in the next section, &#x201c;Managing Separate SEDs&#x201d;.</p>
<p>Say we want to add a NED SED segment of 3C 273 to our photometric points from SDSS (see <a href="index.html#import_phot_points">Importing Photometric Points</a> above for info on how to read-in photometric catalogs). We click on the &#x201c;Load File&#x201d; button under the Segments section in the SED Builder window, which opens the SED loading menu. We select &#x201c;Get an SED from the NED Service&#x201d;, type &#x201c;3c273&#x201d; in the Target Name box, and finally upload the SED by clicking &#x201c;Import NED SED&#x201d;. We now see the NED photometric catalog (in blue squares and pink diamonds) overlaid on the SDSS photometric points, and see that the NED SED has been added into the &#x201c;Segments&#x201d; box in the SED Builder window.</p>
<p><a href="./imgs/load_from_NED.png"><img src="./imgs/load_from_NED_small.png" alt="[snapshot of Iris GUI]" /></a> <a href="./imgs/second_seg_v2_sdss-NED.png"><img src="./imgs/second_seg_v2_sdss-NED_small.jpg" alt="[snapshot of Iris GUI]" /></a></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Managing_Separate_SEDs"></a><a name="separate"></a> Managing Separate SEDs</h2>
<p>The various data segments and photometric points you load into Iris do not necessarily have to contribute to a single, multi-segment SED; you may wish to analyze them separately, e.g., to compare different spectral fits to the same source SED, or maintain separate analysis sessions for different sources.</p>
<p>To load a data segment or point into Iris so that it remains independent of previously loaded data, be sure to add it using the &#x201c;New&#x201d; button at the top of the SED Builder window; doing so will start a new SED entry in the &#x201c;Open SEDs&#x201d; section along the left side of the window, as well as a new entry in the &#x201c;Segments&#x201d; section.</p>
<p><a href="./imgs/separate_seds_v2.png"><img src="./imgs/separate_seds_v2_small.jpg" alt="snapshot of SED Builder GUI" /></a></p>
<p>After selecting the newly added SED in the &#x201c;Open SEDS&#x201d; section, you can add a segment or point using the &#x201c;Load File&#x201d; or &#x201c;New Point&#x201d; options in the &#x201c;Segments&#x201d; section of the SED Builder window, as described in the previous section. Whichever SED is selected under &#x201c;Open SEDs&#x201d; will display in the Iris Visualizer.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Saving_SED_Data_to_File"></a><a name="save"></a> Saving SED Data to File</h2>
<p>When you have finished importing and configuring data segments and photometric points within the SED Builder, you may write each SED to an Iris-compatible FITS, VOTable, or ASCII file by selecting &#x201c;Save&#x201d; from the SED Builder. The default FITS or VOTable formats will save all the metadata for the individual SED segments, thus retaining the data from each segment. You have the option to output the SED as a &#x201c;Single Table,&#x201d; which saves only the spectral axis, flux and flux errors; the metadata is not saved. The SED segments are merged to form one SED (the file has no memory of the individual SED segments), which is useful for easy and convenient loading into external programs. ASCII Tables can only be saved in Single Table format.</p>
<p><img src="./imgs/save_sed_v2.png" alt="snapshot of Iris GUI" /></p>
<p>All SED data output formats are Iris-compatible and therefore may be loaded into the Iris GUI at a later time.</p>
<p>For more information on saving SEDs, see <a href="../../threads/save/index.html" title="Saving SED Data">Saving SED Data in Iris</a>.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Getting_Help"></a><a name="help"></a> Getting Help</h2>
<p>The &#x201c;Help&#x201d; icon on the Iris desktop, marked by an image of a life-buoy, will point your default browser to the on-line help documentation for all of the Iris components. If the program cannot open these links in your default browser, a simple browser should appear in the Iris Desktop itself (note that formatting errors may result, in this case).</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="Advanced:_SED_Builder_Command-line_Interface_CLI"></a><a name="cli"></a> Advanced: SED Builder Command-line Interface (CLI)</h2>

<ul>
  
<li><a href="index.html#create_setup">Creating a Setup File</a>\</li>
  
<li><a href="index.html#use_setup">Using a Setup File</a>\</li>
  
<li><a href="index.html#edit_setup">Editing a Setup File</a>\</li>
  
<li><a href="index.html#example_setup">Example of Using a Setup File</a></li>
</ul>
<p>The SED Builder may be run non-interactively from the Unix command line, using both the data file to be converted, and a setup file containing the configuration information for the conversion. The setup file must be created using the SED Builder interactively, first, according to the procedure described in the section &#x201c;Entering the Conversion Configuration&#x201d;, above.</p>
<div class="section">
<h3><a name="Creating_a_Setup_File_for_the_CLI"></a><a name="creating_setup"></a>Creating a Setup File for the CLI</h3>
<p>A SED Builder setup file is a text file which records the configuration information used by the tool to convert from the user-input unsupported format, to a supported VOTable or FITS data format. Its intended use is to automate the file conversion procedure in scripting. It may be created and saved within the &#x201c;Import Setup Frame&#x201d; window of the SED Builder GUI.</p>
<p>The full set of instructions for creating a setup file is provided in the &#x201c;Enter Conversion Configuration&#x201d; section, above; the basic steps are:</p>

<ul>
  
<li>
<p>Start a new SED building session by clicking on the &#x201c;Load SED&#x201d; icon in the SED Builder desktop interface.</p></li>
  
<li>
<p>Assign it a label when prompted and then click the &#x201c;New Segment(s)&#x201d; button in the SED builder window to load data from a disk, URL, the NED SED web service, or a remotely connected application.</p></li>
  
<li>
<p>In the &#x201c;Import Setup Frame&#x201d; window of the SED Builder GUI, enter the spectral coordinate and flux density characterization of the loaded data so that the tool can make the conversion to a supported data format.</p></li>
  
<li>
<p>Save the configuration to a setup file using the &#x201c;Save Setup&#x201d; option.</p></li>
</ul>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h3><a name="Using_a_Setup_File"></a><a name="using_setup"></a>Using a Setup File</h3>
<p>To run the SED Builder from the command line using a newly created setup file as input, the following arguments must be provided, in the order shown:</p>

<ul>
  
<li><b>config_file</b> - The setup file which contains the importing configuration(s), which was created using the SED Builder in interactive mode</li>
  
<li><b>output_file</b> - The output file that will contain the new SED.</li>
  
<li><b>format</b> - The format in which the new SED file must be written. Choose between &#x2018;vot&#x2019; and &#x2018;fits&#x2019;. If omitted, the default will be &#x2018;vot&#x2019;.</li>
</ul>
<p>For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ iris builder config_file.ini outputfile.vot vot
</pre></div></div>
<p>The setup file created in the SED Builder GUI allows you to quickly convert data in a given unsupported format into one of those supported by Iris. This is particularly useful when you have a long list of files in the same unsupported format which you need to convert and analyze in Iris: instead of loading each file into the GUI and unnecessarily re-creating the same conversion configuration, you can simply use the one setup file you already created to convert a batch of files on the command line.</p>
<p>An example Python script that performs a batch conversion is available <a href="python_example_script.txt">here</a>, with accompanying instructions for customizing and executing. Such a script may be used to automatically convert all the files in a given directory using the SED Builder Command Line Interface.</p>
<p><i>Note that a setup file output by the GUI may also be loaded into the GUI, using the &#x201c;Load from Setup&#x201d; option in the File menu. This is useful when you are building a multi-segment, aggregate SED in the GUI, and would like to contribute a segment for which you have already created a conversion configuration, in a previous session.</i></p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h3><a name="Editing_a_SED_Builder_Setup_File"></a><a name="edit_setup"></a> Editing a SED Builder Setup File</h3>
<p>The contents and format of a SED Builder setup file are described in detail in this section, so that you may learn how to edit the file and customize the configuration to suit your needs, independently of the GUI.</p>
<div class="section">
<h4><a name="Setup_File_Format"></a>Setup File Format</h4>
<p>The output setup file looks like a Windows <tt>.ini</tt> file or a MySQL configuration file. It is organized into sections, with each section representing a separate data segment. This means that in a single setup file you can include many segments from many different files.</p>
<p>Each section has a title between squared brackets, e.g. &#x201c;[Segment1]&#x201d;. Titles are not used when the file is processed, but different titles mark different segments; this means that two sections with the same title would refer to the same segment. While it is allowed to fragment information in different sections it is not wise to do so because if you include the same information more than once in different subsections, the result may become unpredictable.</p>
<p>Beside the title, all the information is expressed in key/value pairs: the key and the value are on the same line and they are separated by the character &#x201c;=&#x201d;, e.g., &#x201c;XAxisColumnNumber = 5&#x201d;; the order does not matter.</p>
<p>Decimal numbers may be represented in scientific notation, e.g., 5.5E-7.</p></div>
<div class="section">
<h4><a name="Setup_File_Contents"></a>Setup File Contents</h4>
<p>The contents of an SED Builder setup file is shown below, where there is a field to specify the location of the input file to be converted, as well as various other fields for specifying the configuration of this input file.</p>

<div class="source">
<div class="source"><pre class="prettyprint">[Segment0]
XAxisColumnNumber = 5
XAxisQuantity = FREQUENCY
XAxisUnit = HERTZ
YAxisColumnNumber = 6
YAxisQuantity = FLUXDENSITY
YAxisUnit = FLUXDENSITYFREQ1
constantErrorValue = 2.0
errorType = ConstantValue
fileLocation = file:/Users/data/3c273.csv
formatName = CSV
publisher = UNKNOWN
targetDec = 2.05238729
targetName = 3c273
targetRa = 187.27791798
</pre></div></div>
<p>The fields of the setup file are defined below.</p>
<div class="section">
<h5><a name="General_Information"></a>General Information</h5>

<ul>
  
<li>
<p><tt>targetName</tt> - A string representing the name of the object this segment belongs to, e.g. &#x201c;3c273&#x201d;</p></li>
  
<li>
<p><tt>targetRa</tt> - The Right Ascension of this segment in decimal degrees (double), e.g. &#x201c;187.27791798&#x201d;</p></li>
  
<li>
<p><tt>targetDec</tt> - The Declination of this segment in decimal degrees (double), e.g. &#x201c;2.05238729&#x201d;</p></li>
  
<li>
<p><tt>publisher</tt> - A string representing the data curator of this segment.</p></li>
</ul></div>
<div class="section">
<h5><a name="File_Information"></a>File Information</h5>

<ul>
  
<li>
<p><tt>fileLocation</tt> - A URL pointing to the actual location of the file. If it is a local file, the absolute path of the file must be preceded by the protocol file:, e.g., file:/User/data/3c273.csv</p></li>
  
<li>
<p><tt>formatName</tt> - the name of the file format which has to be used for reading the file. The string must be chosen among these ones:</p>
  
<ul>
    
<li>VOTABLE</li>
    
<li>CSV</li>
    
<li>FITS</li>
    
<li>ASCIITABLE</li>
    
<li>IPAC</li>
    
<li>TST</li>
  </ul></li>
</ul></div>
<div class="section">
<h5><a name="X_Axis"></a>X Axis</h5>

<ul>
  
<li>
<p>XAxisColumnNumber - an integer representing the column position in the file, where 0 represents the first column.</p></li>
  
<li>
<p>XAxisQuantity - a string representing the spectral quantity of this segment, among:</p>
  
<ul>
    
<li>FREQUENCY</li>
    
<li>WAVELENGTH</li>
    
<li>ENERGY</li>
  </ul></li>
  
<li>
<p>XAxisUnit - a string representing the X Axis units. The units have to be consistent with the Axis quantity, i.e.:</p>
  
<ul>
    
<li>FREQUENCY: HERTZ, KHZ, MHZ, GHZ.</li>
    
<li>WAVELENGTH: ANGSTROM, CM, M, MICRON, NM.</li>
    
<li>ENERGY: EV, KEV, MEV.</li>
  </ul></li>
</ul></div>
<div class="section">
<h5><a name="Y_Axis"></a>Y Axis</h5>

<ul>
  
<li>
<p>YAxisColumnNumber - an integer representing the column position in the  file, where 0 represents the first column.</p></li>
  
<li>
<p>YAxisQuantity - a string representing the spectral quantity of this segment, among:</p>
  
<ul>
    
<li>FLUX</li>
    
<li>FLUXDENSITY</li>
    
<li>MAGNITUDE</li>
    
<li>PHOTONFLUX</li>
    
<li>PHOTONFLUXDENSITY</li>
  </ul></li>
  
<li>
<p>YAxisUnit - a string representing the Y Axis units. The units have to be consistent with the Axis quantity. In the following table you will find the strings of the units that are supported and consistent with each quantity; where applicable, the unit string is indicated. Notice that you do not have to include the unit string but the corresponding label (e.g. FLUXDENSITYFREQ1):</p>
  
<ul>
    
<li>FLUX:
    
<ul>
      
<li>FLUX0: Jy-Hz</li>
      
<li>FLUX1: erg/s/cm2</li>
    </ul></li>
  </ul>
  
<ul>
    
<li>FLUXDENSITY:</li>
  </ul>
  
<div class="source">
<div class="source"><pre class="prettyprint"> * FLUXDENSITYFREQ1: Jy
 * FLUXDENSITYFREQ3: mJy
 * FLUXDENSITYFREQ2: Watt/m2/Hz
 * FLUXDENSITYWL0: erg/s/cm2/Angstrom
 * FLUXDENSITYWL1: Watt/m2/um
 * FLUXDENSITYWL4: erg/s/cm2/Hz
</pre></div></div>
  
<ul>
    
<li>MAGNITUDE:
    
<ul>
      
<li>ABMAG</li>
      
<li>STMAG</li>
    </ul></li>
  </ul>
  
<ul>
    
<li>PHOTONFLUXDENSITY:
    
<ul>
      
<li>PHOTONFLUXDENSITY0: photon/s/cm2/Hz</li>
      
<li>PHOTONFLUXDENSITY1: photon/s/cm2/Angstrom</li>
    </ul></li>
  </ul></li>
</ul></div>
<div class="section">
<h5><a name="Y_Error"></a>Y Error</h5>

<ul>
  
<li>
<p>errorType: the type of the error that characterize the Y Axis, among the following:</p>
  
<ul>
    
<li>Unknown</li>
    
<li>ConstantValue</li>
    
<li>SymmetricColumn</li>
    
<li>SymmetricParameter</li>
  </ul></li>
</ul>
<p>These values for the errorType key may require at least one more key/value pair, with semantics that depend on the chosen option. In the following list, for each error type option you will find a list of acceptable keys and the values they expect.</p>

<ul>
  
<li>
<p><b>Unknown:</b> no other information is required</p></li>
  
<li>
<p><b>ConstantValue:</b></p>
  
<ul>
    
<li><i>constantErrorValue:</i> a decimal number representing the value of the error, e.g. 0.2</li>
  </ul></li>
  
<li>
<p><b>SymmetricColumn:</b></p>
  
<ul>
    
<li><i>symmetricErrorColumnNumber:</i> an integer representing the position of the error column in the file, where the first column is in position 0.</li>
  </ul></li>
  
<li>
<p><b>SymmetricParameter:</b></p>
  
<ul>
    
<li><i>symmetricErrorParameter:</i> the name of the parameter in the file header that contains the value of the error for all the points in the file.</li>
  </ul></li>
</ul>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div></div></div>
<div class="section">
<h3><a name="Example:_Configuring_and_Using_a_Setup_File"></a><a name="example_setup"></a>Example: Configuring and Using a Setup File</h3>
<p>This example is meant to show you how to configure a setup file, and how the setup file works to convert your data. The purpose of the setup file is to allow you to convert many data files in the same unsupported format from the command line, non-interactively; i.e., so that you do not have to re-create the same conversion setup within the GUI for each file.</p>
<p>We want to analyze these two data sets &#x2013; <tt>z1sf_kirkpatrick.dat</tt> and <tt>arp220_IR.txt</tt> &#x2013; in Iris, but they&#x2019;re in ASCII table format, so we must convert them. Let&#x2019;s load in <tt>arp220_IR.txt</tt> into Iris by clicking the &#x201c;Load SED&#x201d; icon, browsing our local disk for the file, selecting &#x201c;ASCII Table&#x201d; from the menu of file format options, and then clicking &#x201c;Load Spectrum/SED&#x201d;.</p>
<p><a href="./imgs/example_load_arp220_IR.dat.png"><img src="./imgs/example_load_arp220_IR.dat_small.jpg" alt="Setup file example" /></a></p>
<p>Since the input file is in ASCII format, instead of being automatically displayed in the Irisizer at this point, we are brought to the Import Setup Frame window of the SED Builder in order to specify which columns in the input ASCII table correspond to the X axis, Y axis, and Y axis error arrays.</p>
<p><a href="./imgs/example_convert_arp220_IR.dat.png"><img src="./imgs/example_convert_arp220_IR.dat_small.jpg" alt="Setup file example" /></a></p>
<p>Here, we have &#x2018;told&#x2019; Iris that the first column in our input data file corresponds to the spectral coordinate axis and contains wavelength values in &#x3bc;m and likewise, that the second column contains flux density values in mJy. Finally, we specify that the errors on the flux density values are contained in the third column of our input file (as opposed to being unknown, or of a constant value).</p>
<p>Before selecting the &#x201c;Add Segment to SED&#x201d; option - in order to be brought back to the SED Builder window where we may manage (and save to file) our converted data - we first save this conversion configuration to a so-called &#x2018;setup&#x2019; file by selecting the &#x201c;Save Setup&#x201d; option; we name the file <tt>ascii_setup.ini</tt>.</p>
<p><a href="./imgs/example_save_setup_file_arp220_IR.dat.png"><img src="./imgs/example_save_setup_file_arp220_IR.dat_small.jpg" alt="Setup file example" /></a></p>
<p>Here are the contents of <tt>ascii_setup.ini</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ more ascii_setup.ini 
[Segment0]
XAxisColumnNumber = 0
XAxisQuantity = WAVELENGTH
XAxisUnit = MICRON
YAxisColumnNumber = 1
YAxisQuantity = FLUXDENSITY
YAxisUnit = FLUXDENSITYFREQ3
errorType = SymmetricColumn
fileLocation = file:/Users/jbudynk/data/arp220_IR.txt
formatName = ASCIITABLE
lowerErrorColumnNumber = 0
positionInFile = 0
publisher = NED
symmetricErrorColumnNumber = 2
targetDec = 23.50319
targetName = arp220
targetRa = 233.73798
upperErrorColumnNumber = 0
</pre></div></div>
<p>The purpose of the setup file is to allow you to convert many data files in the same unsupported format from the command line, non-interactively; i.e., so that you do not have to re-create the same conversion setup within the GUI for each file. This works in our example, because our two data sets have the same ASCII table format; if they were different, we would have to create a separate setup for the second data file within the GUI, repeating the process outlined above.</p>
<p>Having entered and saved our ASCII conversion configuration, we may now display the converted SED in the Iris Visualizer, as well as save it to a file in the SED Builder. We do this by selecting &#x201c;Add Segment to SED&#x201d; in the setup window (at which point the converted SED will appear in the SED Builder window and Iris main display), and then clicking &#x201c;Save&#x201d; at the top of the SED Builder window. In this example, we choose to serialize the data in VOTable format.</p>
<p><a href="./imgs/example_save_converted_arp220_IR.dat.png"><img src="./imgs/example_save_converted_arp220_IR.dat_small.jpg" alt="Setup file example" /></a></p>
<p>Since we saved our ASCII conversion configuration to a setup file in the SED Builder interactive session, we may now run the tool non-interactively from the Unix command line in order to convert our second ASCII data file, <tt>z1sf_kirkpatrick.dat</tt>, using the same setup.</p>
<p>First, we must edit the &#x2018;<tt>fileLocation</tt>&#x2019; field in the setup file to point to the correct data file, as well as the &#x2018;<tt>YAxisUnit</tt>&#x2019; field to reflect the flux unit of the file we are converting. The new values for these fields are shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">YAxisUnit = FLUXDENSITYFREQ1    # Jy; (see &quot;Y Axis&quot; in Editing a Setup File)
fileLocation = file:/Users/jbudynk/data/z1sf_kirkpatrick.dat     
</pre></div></div>
<p>The change to the YAxisUnit field is necessary because the file used to create the setup in the GUI, <tt>arp220_IR.txt</tt>, has flux units mJy (<tt>FLUXDENSITYFREQ3</tt>), whereas the file we are converting on the command line, <tt>z1sf_kirkpatrick.dat</tt>, is in Jy (<tt>FLUXDENSITYFREQ1</tt>). The edited setup file for converting <tt>z1sf_kirkpatrick.dat</tt> to a VOTable format file, is shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ more ascii_setup.ini 
[Segment0]
XAxisColumnNumber = 0
XAxisQuantity = WAVELENGTH
XAxisUnit = MICRON
YAxisColumnNumber = 1
YAxisQuantity = FLUXDENSITY
YAxisUnit = FLUXDENSITYFREQ1
errorType = SymmetricColumn
fileLocation = file:/Users/jbudynk/data/z1sf_kirkpatrick.dat
formatName = ASCIITABLE
lowerErrorColumnNumber = 0
publisher = NED
symmetricErrorColumnNumber = 2
targetDec = 23.50319
targetName = arp220
targetRa = 233.73798
upperErrorColumnNumber = 0
</pre></div></div>
<p>Finally, we perform the conversion using the following command, where we specify the setup file to use to make the conversion, the name of the output converted file, and the format to use for the output file:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ iris builder ascii_setup.ini z1sf_kirkpatrick.vot vot

Building segments...


Building SED...

Writing SED to /Users/jbudynk/data/z1sf_kirkpatrick.vot...

DONE.
</pre></div></div>
<p>We now have two IVOA-compliant, VOTable format files containing which we may load into Iris, bypassing the conversion configuration step outlined above. The second data segment, contained in newly crated file <tt>z1sf_kirkpatrick.vot</tt> in the supported VOTable format, may be loaded into Iris via the &#x201c;Segments -&gt; Load File&#x201d; option in the SED Builder window and automatically displayed.</p>
<hr />
<p>Now you must be thinking, &#x201c;That&#x2019;s a lot of work to convert a few files! Why would I bother?&#x201d; I agree; in practice, this example would be done much more quickly and easily just importing directly into Iris and converting the ASCII data there. But say instead of two ASCII files, you had 100 files to convert. Now clicking on all those drop-down menus in the GUI doesn&#x2019;t sound as much fun when you need to repeat it 100 times. In this case, it would be easier to use a configuration file to convert all your data on the command line via a script.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div></div>
<div class="section">
<h2><a name="Advanced:_Creating_Custom_Input_File_Formats_with_Plugins"></a><a name="plugins"></a> Advanced: Creating Custom Input File Formats with Plugins</h2>
<p>Plugins, software components used to extend the functionality of a given software application, can be used to extend the list of input file formats supported by the SED Builder. Plugins are created by trusted third party developers or by the Iris team itself, and can be installed by the user and then used to read files in custom formats. If you want to develop your own plugin, please refer to the &#x201c;<a href="index.html#dev">For Developers</a>&#x201d; section of this documentation.</p>
<p>Plugins can be loaded into the SED Builder from the local disk or directly from the web. To load a plugin, select &#x201c;Plugins&#x201d; from the &#x201c;File&#x201d; menu.</p>
<p><img src="./imgs/load_plugin.png" alt="screenshot image of Plugin loading window" /></p>
<p>This will open the Plugin Manager GUI, where the plugins that have already been installed are shown, and new plugins can be added by clicking on the button &#x201c;Load Plugin&#x201d;.</p>
<p><img src="./imgs/plugin_manager.png" alt="screenshot image of Plugin Manager GUI" /></p>
<p>Plugins are distributed as Java jar files (extension .jar). Each plugin can contain more than one filter.</p>
<p>Once imported, the plugins, and all the filters therein will be listed in the Plugin Manager.</p>
<p>By right-clicking on a plugin, the plugin can be removed.</p>
<p>The effect of installing a plugin is that all the contained filters will be listed in the Load Segment Window File Format drop-down menu (along with the natively supported ones, like CSV).</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h2><a name="For_Developers"></a><a name="dev"></a> For Developers</h2>
<p>A &#x201c;Plugin&#x201d; refers to a Java archive that contains one or more &#x201c;File Filters&#x201d;.</p>
<p>To develop a plugin, the SED Builder jar (in <tt>iris-2.1-&lt;plat&gt;-&lt;arch&gt;/lib/</tt>) can be used as a simple Software Development Kit (SDK). A more complete SDK is available at <a href="../../threads/sdk/index.html" title="Developing Plugins: the Iris Software Development Kit">&#x201c;Creating Iris Plugins: The Iris Software Development Kit&#x201d;</a>, with example files and test infrastructure to help the developer in creating and testing plugins.</p>
<p>For developing custom filters, there are two possibilities: one is to directly implement the IFilter interface; the other is to annotate an arbitrary class and some of its methods with some annotations.</p>
<p>In any case the SEDBuilder SDK employs the Inversion of Control paradigm to make the development of Custom Filters as seamless as possible.</p>
<div class="section">
<h3><a name="Implementing_the_IFilter_interface"></a>Implementing the IFilter interface</h3>
<p>This approach should be straightforward but does not offer much flexibility. For this reason, a developer is encouraged to leverage the SED Builder SDK framework to write less code and with less risk. In particular, the custom filter implementation can directly extend the AbstractFilter class.</p>
<p>The basic information needed by the Custom Filter is the URL of the file, either it is local (file protocol) or remote (http or ftp). The Filter is supposed to read the file from this URL and provide the Data and the Metadata to the SEDBuilder framework.</p>
<p>The AbstractFilter class provides the getUrl() method that can be used to retrieve the file URL. This means that a Filter extending this class is automatically compliant with the SED Builder caching mechanism, which stores a Filter instance for each URL. The getUrl() method can be used wherever in the code the developer needs to access the file URL.</p>
<p>Several methods are abstract and must be implemented by the extending Filter. Some of these methods are used to provide metadata about the Filter itself (getName(), getAuthor(), getDescription() and getVersion()) and are quite trivial to implement.</p>
<p>The other two abstract methods are used to implement the actual importing code.</p>
<p>The getMetadata() method is invoked by the SED Builder to get the metadata of the file that is being imported. The Filter is supposed to read the file (using the getUrl() method) and return a list of ISegmentMetadata objects. These objects contain lists of two kinds of metadata entities: columns (interface ISegmentColumn) and parameters (interface ISegmentParameter).</p>
<p>There is currently a STIL based implementation of these interfaces that the developer can take advantage of.</p>
<p>In general, the implemented Filter could allow the underlying file format to store more than one table in the same file. This is why the getMetadata() method returns a list. The number of elements in the list is equal to the number of tables (i.e. segments) in the file. So, if the file contains three tables, there will be three elements in the list of ISegmentMetadata objects.</p>
<p>Once the SED Builder framework has acquired the metadata instances, it will ask the Filter to return the actual columns, through the getData method.</p>
<p>The getData(int, int) method gets two integers as arguments and returns an array of java.lang.Number: the index of the segment in the file and the number of the column for which the SEDBuilder is requesting the data to the filter. This method applies to generic file formats that allow for multiple tables to be stored in the same file. As it was discussed before, if the Custom Filter doesn&#x2019;t allow for more than one table to be stored in the file, then the first argument of this method will always be 0. Otherwise the method implementation will be required to handle the different indexes. The index is, at most, the length of the list produced by the getMetadata method.</p>
<p>Note that the extending class can implement its own state so that information is efficiently retained. The important information here is that the framework will keep an instance of the Filter object for each URL, i.e. for each file imported.</p>
<p>Also note that the return type is Number[], and that Number is an abstract class. This means that you can return any subclass of Number[], like Double[] or Integer[].</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div>
<div class="section">
<h3><a name="Using_annotations"></a>Using annotations</h3>
<p>A more flexible and economic (but more error prone, if misused) approach employs the Java annotations. An arbitrary class correctly annotated can employ less code and provide the developer with more freedom in the development of Filters. It is up to the developer to evaluate the trade-off between flexibility and safety.</p>
<p>The first annotation is @Filter. It must be used to annotate the class implementing the Filter, and has several attributes that can be used to provide filter metadata. Even though these attributes have default values, the developer is supposed to override them with the actual Filter metadata. Here is an example of the use of this annotation, which should be self explanatory:</p>

<div class="source">
<div class="source"><pre class="prettyprint">@Filter(
    name=&quot;ASCII Header&quot;,
    author=&quot;Omar Laurino&quot;,
    version=&quot;1.0&quot;,
    description=&quot;ASCII Table with utypes in the header&quot;
    )
public class ASCIIHeaderFilter {
</pre></div></div>
<p>The @FileLocation annotation can be used to tag the field that, at runtime, will contain the URL of the file to import. This variable doesn&#x2019;t need to be initialized and will be &#x201c;injected&#x201d; with the actual URL at runtime. Of course, the variable *must* be of java.net.URL type. Note that in the current release (1.0) this field needs to be declared public. In the next release it will be possible to declare the field private.</p>
<p>The two annotations @Data and @Metadata must be used to tag the methods that return the data and the metadata objects. These methods can have arbitrary names. However, they must get the same arguments of their IFilter counterpart (see previous section) and return their same type.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<hr /></div></div>
<div class="section">
<h2><a name="History"></a><a name="history"></a>History</h2>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Date </th>
      
<th>Change </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>08&#xa0;Aug&#xa0;2011 updated for Iris Beta 2.5 </td>
    </tr>
    
<tr class="a">
      
<td>20&#xa0;Sep&#xa0;2011 updated for Iris 1.0 </td>
    </tr>
    
<tr class="b">
      
<td>23&#xa0;Sep&#xa0;2011 moved section &#x201c;Supported Input File Formats: Extended Information&#x201d; to the References page [SED Importer File Formats][importer_files] </td>
    </tr>
    
<tr class="a">
      
<td>01&#xa0;Jun&#xa0;2012 updated for Iris 1.1 </td>
    </tr>
    
<tr class="b">
      
<td>02&#xa0;Jan&#xa0;2013 updated for Iris 1.2 </td>
    </tr>
    
<tr class="a">
      
<td>21&#xa0;Jun&#xa0;2013 updated for Iris 2.0 </td>
    </tr>
    
<tr class="b">
      
<td>05&#xa0;Aug&#xa0;2013 Updated screenshots for Iris 2.0. Added &#x201c;Single Photometric Point&#x201d; upload discussion and configuration setup example. </td>
    </tr>
    
<tr class="a">
      
<td>02&#xa0;Dec&#xa0;2013 updated for Iris 2.0.1 </td>
    </tr>
    
<tr class="b">
      
<td>04&#xa0;Apr&#xa0;2014 Added link to <a href="../../threads/sdk/index.html" title="Developing Plugins: the Iris Software Development Kit">Developing a Plugin</a> and the Iris SDK under <a href="./index.html#plugins">&#x2018;Creating Custom Input File Formats with Plugins.&#x2019;</a> </td>
    </tr>
    
<tr class="a">
      
<td>07&#xa0;May&#xa0;2015 updated for Iris 2.1 beta. Added ASCII Table as an output format for SEDs. Updated <a href="#example_setup">Setup File</a> example. </td>
    </tr>
  </tbody>
</table>
<hr />

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th align="right"> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td align="right">[<a href="#top">Back to top</a>]</td>
    </tr>
  </tbody>
</table>
<!-- external links -->
<!-- threads -->
<!-- extras (Iris models) -->
<!-- reference files -->
<!-- CXC links -->
<!-- Navigation --></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2015.
          All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
